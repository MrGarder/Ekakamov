<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–∞–≤–æ–º | Ekakamov</title>
    <style>
        body { background: #050505; color: #fff; font-family: sans-serif; display: flex; justify-content: center; padding: 20px; }
        .card { background: #111; padding: 25px; border-radius: 12px; border: 1px solid #8b0000; width: 400px; box-shadow: 0 0 15px rgba(139,0,0,0.3); }
        h2 { color: #ff0000; text-align: center; text-transform: uppercase; margin-bottom: 20px; }
        input, select, button { width: 100%; padding: 12px; margin: 8px 0; border-radius: 6px; border: 1px solid #333; background: #000; color: #fff; box-sizing: border-box; }
        .btn-save { background: #8b0000; font-weight: bold; cursor: pointer; border: none; }
        .btn-delete { background: #444; color: #ff4444; cursor: pointer; border: 1px solid #ff4444; margin-top: 20px; font-size: 12px; }
        .btn-save:hover { background: #ff0000; }
        .btn-delete:hover { background: #ff4444; color: #000; }
        .msg { text-align: center; font-weight: bold; margin-top: 10px; }
        hr { border: 0; border-top: 1px solid #333; margin: 20px 0; }
    </style>
</head>
<body>
    <div class="card">
        <h2>–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</h2>
        
        <input type="password" id="pass" placeholder="–ü–∞—Ä–æ–ª—å –∞–¥–º–∏–Ω–∞">
        <hr>
        
        <label>–ù–∏–∫ –∏–≥—Ä–æ–∫–∞ (—Ç–æ—á–Ω–æ –∫–∞–∫ –≤ –∏–≥—Ä–µ):</label>
        <input type="text" id="name" placeholder="–ü—Ä–∏–º–µ—Ä: Ivan_Ivanov">
        
        <label>–†–∞–Ω–≥:</label>
        <select id="rank">
            <option value="[10] –ì–ª–∞–≤–∞">–ì–ª–∞–≤–∞ [10]</option>
            <option value="[9] –ó–∞–º. –ì–ª–∞–≤—ã">–ó–∞–º. –ì–ª–∞–≤—ã [9]</option>
            <option value="[8] –ì–æ–ª—å–¥">–ì–æ–ª—å–¥ [8]</option>
            <option value="[7] –®–µ—Ä—Ö">–®–µ—Ä—Ö [7]</option>
            <option value="[6] –≠–ª–∏—Ç">–≠–ª–∏—Ç [6]</option>
            <option value="[5] –í–µ—Ç–µ—Ä–∞–Ω">–í–µ—Ç–µ—Ä–∞–Ω [5]</option>
            <option value="[4] –ë–æ–µ—Ü">–ë–æ–µ—Ü [4]</option>
            <option value="[3] –ù–æ–≤–∏—á–æ–∫+">–ù–æ–≤–∏—á–æ–∫+ [3]</option>
            <option value="[2] –†–∞–≤–∫">–†–∞–≤–∫ [2]</option>
            <option value="[1] –ö–∞–Ω–¥–∏–¥–∞—Ç">–ö–∞–Ω–¥–∏–¥–∞—Ç [1]</option>
        </select>

        <label>–í—ã–≥–æ–≤–æ—Ä—ã:</label>
        <input type="number" id="warns" value="0" min="0" max="3">
        
        <label>–°—Ç–∞—Ç—É—Å:</label>
        <select id="online">
            <option value="false">–û—Ñ—Ñ–ª–∞–π–Ω</option>
            <option value="true">–í –∏–≥—Ä–µ</option>
        </select>

        <button class="btn-save" onclick="manageMember('update')">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å / –ò–∑–º–µ–Ω–∏—Ç—å</button>
        <button class="btn-delete" onclick="manageMember('delete')">–£–≤–æ–ª–∏—Ç—å –∏–∑ —Å–µ–º—å–∏</button>
        
        <button style="background:#222; font-size: 12px;" onclick="window.location.href='index.html'">‚Üê –í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –º–µ–Ω—é</button>
        
        <div id="status" class="msg"></div>
    </div>

    <script>
        async function manageMember(action) {
            const status = document.getElementById('status');
            const password = document.getElementById('pass').value;
            const name = document.getElementById('name').value;

            if (!name || !password) {
                status.innerText = "–í–≤–µ–¥–∏—Ç–µ –Ω–∏–∫ –∏ –ø–∞—Ä–æ–ª—å!";
                status.style.color = "yellow";
                return;
            }

            const url = action === 'update' ? '/admin/update-member' : '/admin/delete-member';
            const data = {
                password,
                name,
                rank: document.getElementById('rank').value,
                warns: parseInt(document.getElementById('warns').value),
                online: document.getElementById('online').value === "true"
            };

            try {
                const res = await fetch(url, {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify(data)
                });

                if (res.ok) {
                    status.innerText = action === 'update' ? "‚úÖ –î–∞–Ω–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω—ã!" : "üóëÔ∏è –ò–≥—Ä–æ–∫ —É–¥–∞–ª–µ–Ω!";
                    status.style.color = "lime";
                    if (action === 'delete') document.getElementById('name').value = "";
                } else {
                    status.innerText = "‚ùå –û—à–∏–±–∫–∞! –ü—Ä–æ–≤–µ—Ä—å –ø–∞—Ä–æ–ª—å.";
                    status.style.color = "red";
                }
            } catch (e) {
                status.innerText = "‚ùå –û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è";
            }
        }
    </script>
</body>
</html>
